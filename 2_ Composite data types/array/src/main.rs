fn main() {
    println!("┌──────────────────────────────────────────────────────────────────────┐");
    println!("│                 ПОЛНОЕ РУКОВОДСТВО ПО МАССИВАМ В RUST                │");
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 1. БАЗОВОЕ ОПРЕДЕЛЕНИЕ МАССИВА
    // ========================================================================
    println!("┌── 1.1 Явное объявление типа массива ─────────────────────────────────┐");
    let numbers: [i32; 7] = [1, 2, 3, 5, 8, 13, 21];
    println!("  numbers = {:?}", numbers);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 1.2 Отдельное объявление и инициализация ──────────────────────────┐");
    let seq: [i32; 7];
    seq = [1, 2, 3, 5, 8, 13, 21];
    println!("  seq = {:?}", seq);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 1.3 Автовывод типа при инициализации ──────────────────────────────┐");
    let inferred = [1, 2, 3, 5, 8, 13, 21];
    println!("  inferred = {:?}", inferred);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 1.4 Вывод всего массива ───────────────────────────────────────────┐");
    let all = [1, 2, 3, 4, 5, 6, 7, 8];
    println!("  {:?}", all);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 2. ОБРАЩЕНИЕ К ЭЛЕМЕНТАМ
    // ========================================================================
    println!("┌── 2.1 Доступ по индексу ─────────────────────────────────────────────┐");
    let users = ["Tom", "Bob", "Sam"];
    println!("  users[0] = {}", users[0]);
    println!("  users[2] = {}", users[2]);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 2.2 Изменение элемента (mut) ──────────────────────────────────────┐");
    let mut users_mut = ["Tom", "Bob", "Sam"];
    println!("  before = {}", users_mut[1]);
    users_mut[1] = "Bill";
    println!("  after  = {}", users_mut[1]);
    // users_mut[6] = "Bill"; // ошибка: индекс вне диапазона массива
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 3. ДЛИНА МАССИВА
    // ========================================================================
    println!("┌── 3.1 Метод len() ───────────────────────────────────────────────────┐");
    println!("  count = {}", users.len());
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 4. ПЕРЕБОР МАССИВА
    // ========================================================================
    println!("┌── 4.1 Перебор значений ───────────────────────────────────────────────┐");
    for user in users {
        print!("{} ", user);
    }
    println!();

    let fib = [1, 2, 3, 5, 8, 13, 21];
    for n in fib {
        print!("{} ", n);
    }
    println!();
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 4.2 Перебор с индексами ───────────────────────────────────────────┐");
    for i in 0..users.len() {
        println!("  users[{}] = {}", i, users[i]);
    }
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 5. ЗАПОЛНЕНИЕ ЗНАЧЕНИЕМ ПО УМОЛЧАНИЮ
    // ========================================================================
    println!("┌── 5.1 [значение; размер] ────────────────────────────────────────────┐");
    let defaults: [i32; 5] = [2; 5];
    for n in defaults {
        print!("{} ", n);
    }
    println!();
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 6. МЕТОДЫ МАССИВОВ
    // ========================================================================
    println!("┌── 6.1 sort() ────────────────────────────────────────────────────────┐");
    let mut users_sort = ["Tom", "Bob", "Sam"];
    users_sort.sort();
    println!("  users   = {:?}", users_sort);

    let mut numbers_sort = [1, 8, 5, 21, 13, 2, 3];
    numbers_sort.sort();
    println!("  numbers = {:?}", numbers_sort);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 7. КОПИРОВАНИЕ МАССИВОВ
    // ========================================================================
    println!("┌── 7.1 Типы Copy ─────────────────────────────────────────────────────┐");
    let original = [1, 2, 3];
    let copied = original;
    println!("  original = {:?}, copied = {:?}", original, copied);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 7.2 Типы без Copy (to_owned) ──────────────────────────────────────┐");
    let original_names = [
        String::from("Tom"),
        String::from("Bob"),
        String::from("Sam"),
    ];
    // let moved = original_names; // перемещение: original_names недоступен
    let cloned = original_names.to_owned();
    println!("  cloned   = {:?}", cloned);
    println!("  original = {:?}", original_names);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 8. МНОГОМЕРНЫЕ МАССИВЫ
    // ========================================================================
    println!("┌── 8.1 Двумерный массив и доступ ─────────────────────────────────────┐");
    let matrix: [[i32; 3]; 2] = [[1, 2, 3], [4, 5, 6]];
    let row0: [i32; 3] = matrix[0];
    let row1: [i32; 3] = matrix[1];
    println!("  row0 = {:?}", row0);
    println!("  row1 = {:?}", row1);
    println!("  matrix[0][1] = {}", matrix[0][1]);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 8.2 Перебор двумерного массива ─────────────────────────────────────┐");
    for row in matrix {
        println!("  {:?}", row);
    }
    println!();

    for row in matrix {
        for number in row {
            print!("{} ", number);
        }
        println!();
    }
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // РЕЗЮМЕ
    // ========================================================================
    println!("┌──────────────────────────────────────────────────────────────────────┐");
    println!("│                                РЕЗЮМЕ                                │");
    println!("├──────────────────────────────────────────────────────────────────────┤");
    println!("│ • массив     - набор элементов одного типа                           │");
    println!("│ • [T; N]     - тип массива, N входит в тип                           │");
    println!("│ • доступ     - по индексу с 0                                        │");
    println!("│ • len()      - длина массива                                         │");
    println!("│ • mut        - изменение элементов                                   │");
    println!("│ • sort()     - сортировка массивов                                   │");
    println!("│ • copy/clone - зависит от типа элементов                             │");
    println!("│ • 2D массивы - массивы массивов                                      │");
    println!("└──────────────────────────────────────────────────────────────────────┘");

    println!("\n✅ Урок по массивам в Rust завершён!");
}
