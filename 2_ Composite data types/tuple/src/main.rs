fn main() {
    println!("┌──────────────────────────────────────────────────────────────────────┐");
    println!("│                 ПОЛНОЕ РУКОВОДСТВО ПО КОРТЕЖАМ В RUST                │");
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 1. БАЗОВОЕ ОПРЕДЕЛЕНИЕ КОРТЕЖА
    // ========================================================================
    println!("┌── 1.1 Определение кортежа (автовывод типов) ─────────────────────────┐");
    let user = ("Tom", 36, 1.78);
    println!("  user = (\"{}\", {}, {})", user.0, user.1, user.2);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 1.2 Явное указание типов ──────────────────────────────────────────┐");
    let user_typed: (&str, u8, f32) = ("Tom", 36, 1.78);
    println!(
        "  user_typed = (\"{}\", {}, {})",
        user_typed.0, user_typed.1, user_typed.2
    );
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 2. ДОСТУП К ЭЛЕМЕНТАМ КОРТЕЖА
    // ========================================================================
    println!("┌── 2.1 Доступ по индексу ─────────────────────────────────────────────┐");
    println!("  Имя: {}", user.0);
    println!("  Возраст: {}", user.1);
    println!("  Рост: {}", user.2);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 3. ИЗМЕНЕНИЕ ЭЛЕМЕНТОВ (mut)
    // ========================================================================
    println!("┌── 3.1 Изменение элементов кортежа ───────────────────────────────────┐");
    let mut mutable_user: (&str, u8, f32) = ("Tom", 36, 1.78);
    mutable_user.0 = "Bob";
    println!("  Имя после изменения: {}", mutable_user.0);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 4. ДЕКОМПОЗИЦИЯ (DESTRUCTURING)
    // ========================================================================
    println!("┌── 4.1 Декомпозиция кортежа ──────────────────────────────────────────┐");
    let (name, age, height) = user;
    println!("  Имя: {}", name);
    println!("  Возраст: {}", age);
    println!("  Рост: {}", height);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 4.2 Игнорирование части данных ────────────────────────────────────┐");
    let (short_name, short_age, _) = user;
    println!("  Имя: {}", short_name);
    println!("  Возраст: {}", short_age);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 5. СРАВНЕНИЕ КОРТЕЖЕЙ
    // ========================================================================
    println!("┌── 5.1 Сравнение поэлементно ─────────────────────────────────────────┐");
    let user_pair = ("Tom", 36);
    if ("Tom", 36) == user_pair {
        println!("  name: Tom, age: 36");
    }
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 6. ВЛАДЕНИЕ И КОРТЕЖИ
    // ========================================================================
    println!("┌── 6.1 Кортеж с типами Copy ──────────────────────────────────────────┐");
    let a = (1, 2);
    let b = a; // копирование
    println!("  a = ({}, {}), b = ({}, {})", a.0, a.1, b.0, b.1);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 6.2 Кортеж с типами без Copy ──────────────────────────────────────┐");
    let owner = (String::from("Tom"), 39);
    let borrowed = &owner; // берем ссылку, чтобы не передавать владение
    println!("  owner name: {}", owner.0);
    println!("  borrowed name: {}", borrowed.0);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // 7. КОРТЕЖ КАК ПАРАМЕТР И РЕЗУЛЬТАТ ФУНКЦИИ
    // ========================================================================
    println!("┌── 7.1 Кортеж как параметр функции ───────────────────────────────────┐");
    let tom = ("Tom", 36);
    display_user(tom);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 7.2 Декомпозиция в параметрах ─────────────────────────────────────┐");
    display_user_parts(("Bob", 42));
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 7.3 Передача по ссылке (без Copy) ─────────────────────────────────┐");
    let alice = (String::from("Alice"), 29);
    display_user_ref(&alice);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    println!("┌── 7.4 Возврат кортежа из функции ────────────────────────────────────┐");
    let (x, y) = get_default_point();
    println!("  x: {}, y: {}", x, y);
    println!("└──────────────────────────────────────────────────────────────────────┘\n");

    // ========================================================================
    // РЕЗЮМЕ
    // ========================================================================
    println!("┌──────────────────────────────────────────────────────────────────────┐");
    println!("│                                РЕЗЮМЕ                                │");
    println!("├──────────────────────────────────────────────────────────────────────┤");
    println!("│ • кортеж        - группа значений разных типов                       │");
    println!("│ • типы          - фиксированы количеством и порядком элементов       │");
    println!("│ • доступ        - через .индекс (0, 1, 2...)                         │");
    println!("│ • mut           - можно менять элементы                              │");
    println!("│ • destructuring - разложение кортежа на переменные                   │");
    println!("│ • владение      - учитывает Copy/Move семантику                      │");
    println!("│ • функции       - кортежи передаются и возвращаются                  │");
    println!("└──────────────────────────────────────────────────────────────────────┘");

    println!("\n✅ Урок по кортежам в Rust завершён!");
}

// Пример функции, которая принимает кортеж.
fn display_user(user: (&str, i32)) {
    println!("  name: {}  age: {}", user.0, user.1);
}

// Пример декомпозиции прямо в параметрах.
fn display_user_parts((name, age): (&str, i32)) {
    println!("  name: {}  age: {}", name, age);
}

// Передача кортежа по ссылке, чтобы не забирать владение.
fn display_user_ref(user: &(String, i32)) {
    println!("  name: {}  age: {}", user.0, user.1);
}

// Возвращаем кортеж из функции.
fn get_default_point() -> (i32, i32) {
    (4, 25)
}
